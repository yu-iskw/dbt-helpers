{% import "macros.jinja" as macros -%}

{%- set documentation = '{{{{ doc("{}") }}}}'.format(resource.name) -%}
# DO NOT EDIT THIS FILE DIRECTLY.
# It was generated by dbt-helper=={{ context.dbt_helper_version }}.
version: 2

models:
  - name: {{ resource.name }}
    description: |
      {{ documentation }}
    config:
      meta:
        owner: "@{{- context.owner -}}" # hola mention name, e.g. "@hola-medico-monshin-engineer-members"
        contains_pii: "false"
        # Lightdash
        group_label: "{{ context.project_alias }}/{{ context.dataset }}"
        label: "{{ resource.name }}"
      {%- if resource.meta | length > 0 %}
      {%- for k, v in resource.meta.items() %}
      {%- if k != '_extraction_metadata' %}
        {{- k -}}: "{{- v -}}"
      {%- endif %}
      {%- endfor %}
      {%- endif %}

    # data_tests:
    #   # see also https://github.com/dbt-labs/dbt-utils#unique_combination_of_columns-source
    #   - dbt_utils.unique_combination_of_columns:
    #       combination_of_columns:
    #         - column1
    #         - column2

    columns:
      {%- for col in resource.columns %}
      - name: {{ col.name }}
        description: "{{ col.description or 'DESCRIBE THE COLUMN' }}"
        data_tests:
          # TODO Please modify the test cases. see also https://docs.getdbt.com/docs/build/data-tests
          # At a minimum, consider using `unique` and `not_null` tests if suitable
          - unique
          - not_null
      {%- endfor %}
